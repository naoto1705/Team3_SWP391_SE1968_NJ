<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <title>Select Case</title>
    <link rel="stylesheet" th:href="@{/css/BuildStyle.css}">
</head>

<body>
<div class="container">
    <!-- Sidebar -->
    <div class="sidebar">
        <h2>Auto Build</h2>
        <ul>
            <li><a th:href="@{/build/mainboard}">MainBoard</a></li>
            <li><a th:href="@{/build/cpu}">CPU</a></li>
            <li><a th:href="@{/build/gpu}">GPU</a></li>
            <li class="active">Case</li>
            <li><a th:href="@{/build/cooling}">Cooling</a></li>
            <li><a th:href="@{/build/memory}">Memory</a></li>
            <li><a th:href="@{/build/storage}">Storage</a></li>
            <li><a th:href="@{/build/psu}">PSU</a></li>
            <li><a th:href="@{/build/other}">Other</a></li>
        </ul>
        <button class="overview-btn">Overview</button>
        <a th:href="@{/build/startover}">Start over</a>
    </div>

    <!-- Main content -->
    <div class="main-content">
        <!-- Filter -->
        <div class="filter-bar">
            <input type="text" placeholder="Search..." id="searchBox"/>
            <button type="button" onclick="filterProducts()">Go!</button>
            <select id="formFactorFilter">
                <option value="">Form Factor</option>
                <option value="ATX">ATX</option>
                <option value="Micro-ATX">Micro-ATX</option>
                <option value="Mini-ITX">Mini-ITX</option>
            </select>
            <a href="#" class="clear-filter" onclick="clearFilter()">Clear filter</a>
        </div>

        <!-- Product Grid -->
        <form th:action="@{/build/selectCase}" method="post" id="caseForm">
            <input type="hidden" name="caseId" id="selectedCaseId"/>
            <div class="product-grid">
                <div th:each="case : ${cases}"
                     class="product-card"
                     th:attr="data-id=${case.productId}"
                     th:data-name="${case.product.productName}"
                     th:data-formfactor="${case.formFactor}"
                     th:data-gpumaxlength="${case.gpuMaxLength}"
                     th:data-cpumaxheight="${case.cpuMaxCoolerHeight}"
                     th:data-psumaxlength="${case.psuMaxLength}">
                    <img th:if="${case.product.image != null}" th:src="${case.product.image}" alt="Case Image"/>
                    <h4 th:text="${case.product.productName}"></h4>
                    <p th:text="'Form Factor: ' + ${case.formFactor}"></p>
                    <p th:text="'GPU Max Length: ' + ${case.gpuMaxLength} + 'mm'"></p>
                    <strong th:text="'$' + ${case.product.price}"></strong>
                </div>
            </div>

            <!-- Footer -->
            <div class="footer-bar">
                <span>Total Price: <strong id="priceTotal" th:text="'$' + ${buildItems.calculateTotalPrice()}"></strong></span>
                <button type="submit" class="next-btn">Next</button>
            </div>
        </form>
    </div>

    <!-- Detail panel -->
    <div class="detail-panel">
        <div class="detail-header">SELECT CASE</div>
        <div class="detail-body">
            <h3 id="detailName">Name Product</h3>
            <div class="detail-image"></div>
            <div class="detail-spec">
                <h4>SPECIFICATION</h4>
                <p id="detailFormFactor">Form Factor: ...</p>
                <p id="detailGpuLength">GPU Max Length: ...</p>
                <p id="detailCpuHeight">CPU Cooler Max Height: ...</p>
                <p id="detailPsuLength">PSU Max Length: ...</p>
            </div>
        </div>
    </div>
</div>

<script th:src="@{/js/BuildJs.js}"></script>
</body>
</html>
